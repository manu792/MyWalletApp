@model MyWalletApp.Models.ProyeccionServicioViewModel
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2 id="btn">Proyecciones</h2>

<div id="chartContainer" style="height: 370px; width: 100%;"></div>

@using (Html.BeginForm())
{
    <table class="table">
        <tr>
            <th>
                @Html.Label("Servicio")
            </th>
            <th>
                @Html.Label("Monto")
            </th>
            <th>
                @Html.Label("Fecha")
            </th>
            <th></th>
        </tr>

        @foreach (var item in Model.Proyecciones)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.indexLabel)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.y)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.fechaPago)
                </td>
                <td>
                    @Html.ActionLink("Eliminar", "Delete", new { id = item.id })
                </td>
            </tr>
        }
    </table>
}

<!-- Scripts -->
@section scripts{
    <script src="https://canvasjs.com/assets/script/jquery-1.11.1.min.js"></script>
    <script src="https://canvasjs.com/assets/script/jquery.canvasjs.min.js"></script>
    <script>
            var options = {
                animationEnabled: true,
                title: {
                    text: "Pagos del Proximo Mes",
                    fontColor: "Peru"
                },
                axisY: {
                    tickThickness: 0,
                    lineThickness: 0,
                    valueFormatString: " ",
                    gridThickness: 0
                },
                axisX: {
                    tickThickness: 0,
                    lineThickness: 0,
                    labelFontSize: 18,
                    labelFontColor: "Peru"
                },
                data: [{
                    indexLabelFontSize: 26,
                    toolTipContent: "<span style=\"color:#62C9C3\">{indexLabel}:</span> <span style=\"color:#CD853F\"><strong>{y} colones. Fecha de pago: {FechaPago}</strong></span>",
                    indexLabelPlacement: "inside",
                    indexLabelFontColor: "white",
                    indexLabelFontWeight: 600,
                    indexLabelFontFamily: "Verdana",
                    color: "#62C9C3",
                    type: "bar",
                    dataPoints: @Html.Raw(Json.Encode(Model.Proyecciones))
                    //dataPoints: [
                    //    { y: 21, label: "21%", indexLabel: "Video" },
                    //    { y: 25, label: "25%", indexLabel: "Dining" },
                    //    { y: 33, label: "33%", indexLabel: "Entertainment" },
                    //    { y: 36, label: "36%", indexLabel: "News" },
                    //    { y: 42, label: "42%", indexLabel: "Music" },
                    //    { y: 49, label: "49%", indexLabel: "Social Networking" },
                    //    { y: 50, label: "50%", indexLabel: "Maps/ Search" },
                    //    { y: 55, label: "55%", indexLabel: "Weather" },
                    //    { y: 61, label: "61%", indexLabel: "Games" }
                    //]
                }]
            };
            $("#chartContainer").CanvasJSChart(options);
    </script>
}

